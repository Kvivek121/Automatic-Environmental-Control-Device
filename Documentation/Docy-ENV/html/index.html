<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Automatic Environment Control Device: Automatic Environment Control Device</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="5bb7afbe-805f-472b-a3df-d6439ef54903.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">Automatic Environment Control Device
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Automatic Environment Control Device </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_C__Users_acer_STM32CubeIDE_workspace_1_10_2_Final_Selec_v3_Core_Readme"></a> Selec Controls Mini Project </p><pre class="fragment">1.  Project details: -
</pre><p> • Project Title: -Automatic Environment Control device • Problem Statement: - To develop an Industrial automation device which will operate certain functionalities based on the various Environmental parameters (Temperature, Pressure and Humidity level) of a Container/Room. • Project Objectives: -</p>
<p>i. Sense the Temperature, Humidity and Pressure from BMP280 and DHT11 sensor. ii. Take measure to control the Environmental parameter if the value crosses a certain limit. iii. Provide a functionality to user to change the Threshold values of Environmental parameters through a switch. iv. Display the Sensed value of temperature, Humidity, pressure. <br  />
 </p><pre class="fragment">2. Design consideration containing

    a.   Block diagram 
</pre><p> <img src="C:\Users\acer\STM32CubeIDE\workspace_1.10.2\Final_Selec_v3\Core\s1.jpg?raw=true" alt="Alt text" title="Title" class="inline"/></p>
<p>General Device Block diagram</p>
<pre class="fragment">    b.  Calculation for components 

        i.  Voltage Regulation 
        In the project I have used IC 7805 for voltage regulation, there are two different circuitries which are electrically isolated from each other one is using a 9-volt battery to operate and another is using a 12-volt adaptor to operate. Circuitry consisting of relay is using an adaptor rating 12-volt 1.5 ampere and IC7805 is converting it into 5 volts, the microcontroller circuitry consisting of the sensors, the LCD screen user control switches is been operated by a 9-volt battery IC7805 is converting the 9 volts into 5 volts.
        Adapter Rating 12V ,1.5A
        Vin=12V
        Vout= 5V with 1.5A
        (Excess energy will be dissipated in form of heat.)  

        ii. Relay Circuitry 
        The relay coil resistance =65 ohms
        Supply voltage =5V
        Relay current I = 5/65 = 0.076 or 76 mA.
        Thus, the back EMF current will be much smaller than this. A 1N4007 will be perfectly able to handle this reverse current. PIV of a 1N4007 is 1000 V and the current handling capacity is 1 amp.
            A resistor of 560ohms is used at the base to limit the current to trigger the transistor.

        iii.    
    c.  Selection criteria 
</pre><p> <img src="C:\Users\acer\STM32CubeIDE\workspace_1.10.2\Final_Selec_v3\Core\s7.png?raw=true" alt="Alt text" title="Title" class="inline"/></p>
<p>S no. Component Requirement Selected Component</p><ol type="1">
<li>Microcontroller 1 SPI port, 1 I2C port and 1 Timer with 5 digital I/O pins Stm32f103c8t6</li>
<li>Temperature Sensor Sensor able to provide Temperature reading in range of (-10 to 50) BMP280</li>
<li>Humidity Sensor Sensor able to provide Humidity reading with 5% accuracy ADA386</li>
<li>Pressure Sensor Sensor able to provide Pressure reading BMP280</li>
<li>16X2 LCD with I2C Extender A screen for displaying the reading. JHD162A + PCF8574</li>
<li>Relay Able to handle heating, cooling and compression generating devices SRD-05VDC-SL-C</li>
<li>NPN transistor To facilitate in operating relay. BC547</li>
<li>Resistors To resist current Generic</li>
<li>Optocoupler To isolate relay circuitry from microcontroller and sensors, so as to protect microcontroller from rebooting. EL817</li>
<li>3 Pin terminal connectors To facilitate connect AC appliances. KF301</li>
<li>IC7805 To provide a regulated 5V power supply. IC7805</li>
<li>Push button To provide user control facilities. 1825910-2 <br  />
</li>
<li>9V Battery To provide power to microcontroller and sensors. generic</li>
<li>DC jack For connecting power sources to the board. PJ-002AH</li>
<li>Led To indicate relay operation. <br  />
</li>
<li>Freewheeling Diode To facilitate relay circuitry. 1N4007</li>
<li>Bug strip To mount microcontroller. generic</li>
<li>Copper Clad PCB Board To make a PCB board. generic</li>
</ol>
<p>The various components are selected based on the required functionality, easy availability, cost and pression up to which the sensor can provide the output, below is the detailed selection criterion and the available alternatives in the market.</p>
<ol type="1">
<li>Microcontroller: - STM32f103c8t6 is used in the project to collect the sensory inputs from BMP280 and DHT11 sensor which work on SPI and digital input interfaces, while and 16X2 LCD with an I2C extender is used which uses I2C protocol for communication. Blue pill provides SPI, I2C ports and digital I/O pins and Timers with 64KB Flash and 20KB of SRAM which satisfied the need for the application with minimum wastage of resources. Available alternatives: - A range of Microcontrollers board by STM32, PIC, Arduino, Espressif, Raspberry pi are available. The closest alternative was the STM32f103c6t6 board but due to only 32Kbytes of Flash available the board was not capable to handle the Firmware.</li>
<li>Sensor: - The sensors used in the project are Temperature, Humidity and Pressure sensor. i. Temperature -BMP280 sensor by Bosch is used which is a Barometric pressure and temperature measurement sensor. DHT11 sensor used in the project is also capable to measure temperature but BMP280’s measurements are more preferred due to its high accuracy. ii. BMP280 sensor by Bosch is used which is a Barometric pressure and pressure measurement sensor. iii. DHT11 sensor which is a digital Humidity and temperature sensor is used to measure the humidity levels in percentage.</li>
<li>LCD: - A generic 16X2 LCD display is selected to display the measured sensor readings, in addition to it an LCD I2C extender is use to reduce the number of pins used to control the LCD.</li>
<li>5V Relay and circuitry: - A generic 5V relay which can be triggered from microcontroller and can operate small appliances which can work on up to 240V Ac with maximum 10A of current.</li>
</ol>
<p>d. Firmware consideration: - During the firmware consideration stage STMcubeIDE is used to write code in C language separate libraries are created for each functionality viz. BMP 280 sensor dht 11 sensors to display on LCD for writing the code for menu program and for debugging purpose.</p>
<pre class="fragment">    e.  Firmware block diagram / Flow chart 
</pre><p> <img src="C:\Users\acer\STM32CubeIDE\workspace_1.10.2\Final_Selec_v3\Core\s4.png?raw=true" alt="Alt text" title="Title" class="inline"/> </p><pre class="fragment">    f.  Test plan: -
</pre><p> i. Unit testing</p>
<p>S no. Unit tests Functionalities tested Remark</p><ol type="1">
<li>BMP280 sensor Data acquisition on SPI Successfully able to communicate with sensor and able to read/ write its registers.</li>
<li>BMP280 sensor Tested the algorithm for conversion of Raw sensor data into useful values. Used burst read to reduce the mismatch on register data and resist there overwriting</li>
<li>DHT11 sensor Timer and microsecond delay generation for communication with sensor. Successfully able to generate the delay and communicate with sensor.</li>
<li>LCD I2C Communicate with LCD I2C extender to be able to display on LCD Used references and able to display on LCD</li>
<li>Relay circuit Able to trigger relay gpio of Microcontroller Faced problem of restarting of Microcontroller when relay gets triggered due to diversion of current to coil, used opto coupler to create isolated circuitry to solve problem.</li>
<li>Interfacing tactile push button Able to create functionalities through push buttons Used Interrupt to develop the functionalities.</li>
</ol>
<p>ii. Integration testing During integration testing I integrated DHT 11 sensor, BMP280 sensor, LCD i2c display and relay circuit, for integration I use the previously built libraries and called the various functions based on the requirement of functionalities. To solve the problem of diversion of current from microcontroller to relay and to stop the microcontroller from restarting while triggering the relay I used opto-coupler to isolate the relay circuitry and the microcontroller, sensor and LCD circuitry. During the testing device was accessed on the parameter of their accuracy, the sensor was providing viz DHT11 and BMP 280 and simultaneously displaying the results on the LCD display, the menu program was also tested during this integration menu button was pressed an interrupt was triggered and the program shift from the main program to the menu program and various threshold were able to be changed. Due to not able to generate non-blocking delay the previous functionality of 15 second timer based returning from the menu program to the main program was discarded and a functionality of pressing the menu button 5 times is used to come out from the menu program come out to the main program. iii. Field testing </p><pre class="fragment">3. Component values and part number 
</pre><p> S no. Component Part no Value Quantity Cost</p><ol type="1">
<li>Microcontroller Stm32f103c8t6 NA 1 <br  />
</li>
<li>BMP280 BMP280 NA 1 <br  />
</li>
<li>DHT11 ADA386 NA 1 <br  />
</li>
<li>16x2 LCD JHD162A NA 1 <br  />
</li>
<li>I2C Extender PCF8574 NA 1 <br  />
</li>
<li>Relay SRD-05VDC-SL-C 3 <br  />
</li>
<li>NPN transistor BC547 NA 3 <br  />
</li>
<li>Resistors Generic 3- 100ohms, 3-220ohms, 3-560 ohms. 9 <br  />
</li>
<li>Optocoupler EL817 NA 3 <br  />
</li>
<li>3 Pin terminal connectors KF301 NA 3 <br  />
</li>
<li>Voltage Regulator IC7805 NA 2 <br  />
</li>
<li>Tactile Push button 1825910-2 NA 3 <br  />
</li>
<li>9V Battery generic 9V 1 <br  />
</li>
<li>DC jack PJ-002AH NA 2 <br  />
</li>
<li>Led NA <br  />
</li>
<li>Freewheeling Diode 1N4007 NA 3 <br  />
</li>
<li>Bug strip generic NA 2 <br  />
</li>
<li>Copper Clad PCB Board generic NA 1 <br  />
<ol type="a">
<li>Circuit and Schematic <br  />
</li>
</ol>
</li>
</ol>
<p><img src="C:\Users\acer\STM32CubeIDE\workspace_1.10.2\Final_Selec_v3\Core\s3.png?raw=true" alt="Alt text" title="Title" class="inline"/></p>
<p><img src="C:\Users\acer\STM32CubeIDE\workspace_1.10.2\Final_Selec_v3\Core\s5.jpg?raw=true" alt="Alt text" title="Title" class="inline"/><img src="C:\Users\acer\STM32CubeIDE\workspace_1.10.2\Final_Selec_v3\Core\s6.jpg?raw=true" alt="Alt text" title="Title" class="inline"/> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
